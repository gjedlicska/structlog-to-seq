[pytest]
strict = true
testpaths = tests

[tox]
envlist = testenv, coverage-report
isolated_build = True

[tox:.package]
basepython = python3


[testenv:lint]
basepython = python3.7
skip_install = true
deps = pre-commit
;passenv = HOMEPATH  # needed on Windows
commands = pre-commit run --all-files

[testenv]
deps = coverage[toml]
       pytest
commands = coverage run -m pytest {posargs}

[testenv:coverage-report]
basepython = python3.7
deps = coverage[toml]
skip_install = true
commands =
    coverage combine
    coverage report


[flake8]
exclude = .tox
show-source = true
enable-extensions=G
application-import-names = structlog_to_seq
max-line-length = 88
extend-ignore = E203
